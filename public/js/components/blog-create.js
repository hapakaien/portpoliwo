(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"9jOc":function(t,e,a){"use strict";a.r(e);var n=a("o0o1"),o=a.n(n),r=a("e7F3"),s=a("uUT0"),i=a("3WF5"),c=a.n(i),l=a("ck9e");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function p(t,e,a,n,o,r,s){try{var i=t[r](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function s(t){p(r,n,o,s,i,"next",t)}function i(t){p(r,n,o,s,i,"throw",t)}s(void 0)}))}}var m={name:"CreateBlogPost",metaInfo:{title:"Blog: Create Post"},components:{ValidationObserver:r.a,FormInput:function(){return Promise.resolve().then(a.bind(null,"S2+X"))},FormImage:function(){return a.e(2).then(a.bind(null,"Pyp4"))},FormTagInput:function(){return a.e(6).then(a.bind(null,"L9Lv"))},FormRichtext:function(){return Promise.all([a.e(4),a.e(5)]).then(a.bind(null,"6PeD"))},SaveButton:function(){return a.e(0).then(a.bind(null,"Cj62"))}},data:function(){return{category:{data:[],isFetching:!1},tag:{data:[],isFetching:!1},post:{title:"",slug:null,summary:null,content:"",image:null,blog_category_id:[],blog_tag_id:[]}}},methods:{getFilteredCategories:function(t){var e=this;return f(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.length){a.next=3;break}return e.category.data=[],a.abrupt("return");case 3:return e.category.isFetching=!0,a.next=6,l.a.get("/blog/category?search=".concat(t)).then((function(t){var a=t.data;e.category.data=[],a.data.forEach((function(t){return e.category.data.push(t)}))})).catch((function(t){throw e.category.data=[],t})).finally((function(){e.category.isFetching=!1}));case 6:case"end":return a.stop()}}),a)})))()},getFilteredTags:function(t){var e=this;return f(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.length){a.next=3;break}return e.tag.data=[],a.abrupt("return");case 3:return e.tag.isFetching=!0,a.next=6,l.a.get("/blog/tag?search=".concat(t)).then((function(t){var a=t.data;e.tag.data=[],a.data.forEach((function(t){return e.tag.data.push(t)}))})).catch((function(t){throw e.tag.data=[],t})).finally((function(){e.tag.isFetching=!1}));case 6:case"end":return a.stop()}}),a)})))()},onSubmit:function(){var t=this;return f(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.serialize)(g(g({},t.post),{},{blog_category_id:c()(t.post.blog_category_id,"id"),blog_tag_id:c()(t.post.blog_tag_id,"id")}),{nullsAsUndefineds:!0}),e.next=3,l.a.post("/blog",a).then((function(e){var a=e.data;a.success&&t.$buefy.toast.open({message:a.message,type:"is-success"}),t.$router.back()})).catch((function(e){var a=e.response.data;a.errors&&t.$refs.form.setErrors(a.errors),t.$buefy.toast.open({message:a.message,type:"is-danger"})}));case 3:case"end":return e.stop()}}),e)})))()}}},b=a("KHd+"),v=Object(b.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.passes;return[a("form",{on:{submit:function(e){return e.preventDefault(),n(t.onSubmit)}}},[a("div",{staticClass:"columns is-multiline"},[a("div",{staticClass:"column is-12"},[a("FormInput",{attrs:{label:"Title",name:"title"},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormInput",{attrs:{label:"Slug (Optional)",name:"slug",message:"If the slug is not available, it will be automatically generated based on the title."},model:{value:t.post.slug,callback:function(e){t.$set(t.post,"slug",e)},expression:"post.slug"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormInput",{attrs:{label:"Summary (Optional)",name:"summary",type:"textarea"},model:{value:t.post.summary,callback:function(e){t.$set(t.post,"summary",e)},expression:"post.summary"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormRichtext",{attrs:{label:"Content",name:"content"},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormImage",{attrs:{label:"Image",name:"image",message:"For best results, use an image with an aspect ratio of 16:9.",rounded:!1},model:{value:t.post.image,callback:function(e){t.$set(t.post,"image",e)},expression:"post.image"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormTagInput",{attrs:{label:"Categories",name:"blog_category_id",data:t.category.data,loading:t.category.isFetching,field:"title",icon:"folder-table",placeholder:"Add a category"},on:{typing:t.getFilteredCategories},model:{value:t.post.blog_category_id,callback:function(e){t.$set(t.post,"blog_category_id",e)},expression:"post.blog_category_id"}})],1),t._v(" "),a("div",{staticClass:"column is-12"},[a("FormTagInput",{attrs:{label:"Tags",name:"blog_tag_id",data:t.tag.data,loading:t.tag.isFetching,field:"title",icon:"folder-table",placeholder:"Add a tag"},on:{typing:t.getFilteredTags},model:{value:t.post.blog_tag_id,callback:function(e){t.$set(t.post,"blog_tag_id",e)},expression:"post.blog_tag_id"}})],1)]),t._v(" "),a("hr"),t._v(" "),a("SaveButton")],1)]}}])})],1)}),[],!1,null,null,null);e.default=v.exports}}]);