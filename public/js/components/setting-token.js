(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{Ae01:function(e,t,n){var a=n("JXgG");"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,o);a.locals&&(e.exports=a.locals)},GC0M:function(e,t,n){"use strict";var a=n("Ae01");n.n(a).a},JXgG:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.tag[data-v-336e960b] {\n  cursor: pointer;\n}\n",""])},hAzO:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),o=n.n(a),r=n("e7F3"),s=n("ck9e");function i(e,t,n,a,o,r,s){try{var i=e[r](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function s(e){i(r,a,o,s,c,"next",e)}function c(e){i(r,a,o,s,c,"throw",e)}s(void 0)}))}}var u={name:"SettingToken",metaInfo:{title:"Setting: API Token"},components:{ValidationObserver:r.a,FormInput:function(){return Promise.resolve().then(n.bind(null,"S2+X"))},SaveButton:function(){return n.e(0).then(n.bind(null,"Cj62"))}},data:function(){return{token:{name:""},createdToken:"",tokens:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return c(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("/setting/token").then((function(t){var n=t.data.data;e.tokens=n})).catch((function(){e.tokens=[]}));case 2:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return c(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.createdToken="",t.next=3,s.a.post("/setting/token",e.token).then((function(t){var n=t.data;n.success&&e.$buefy.toast.open({message:n.message,type:"is-success"}),e.fetchData(),e.createdToken=n.data.token,e.token.name=""})).catch((function(t){var n=t.response.data;n.errors&&e.$refs.form.setErrors(n.errors),e.$buefy.toast.open({message:n.message,type:"is-danger"})}));case 3:case"end":return t.stop()}}),t)})))()},deleteToken:function(e){var t=this;return c(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$buefy.dialog.confirm({title:"Deleting data",message:"Are you sure you want to <b>delete</b> selected token? This action cannot be undone.",confirmText:"Delete Token",type:"is-danger",hasIcon:!0,onConfirm:function(){var n=c(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.delete("/setting/token/".concat(e)).then((function(e){var n=e.data;t.$buefy.toast.open({message:n.message,type:"is-danger"})})).catch((function(e){var n=e.response.data;t.$buefy.toast.open({message:n.message,type:"is-danger"})}));case 2:return n.next=4,t.fetchData();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});case 1:case"end":return n.stop()}}),n)})))()}}},f=(n("GC0M"),n("KHd+")),l=Object(f.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.passes;return[n("form",{on:{submit:function(t){return t.preventDefault(),a(e.onSubmit)}}},[n("div",{staticClass:"columns is-multiline"},[n("div",{staticClass:"column is-12"},[n("FormInput",{attrs:{label:"Create API token",placeholder:"Token name",name:"name"},model:{value:e.token.name,callback:function(t){e.$set(e.token,"name",t)},expression:"token.name"}},[n("SaveButton",{attrs:{type:"is-primary",rounded:!1}},[e._v("Create")])],1)],1),e._v(" "),e.createdToken?n("div",{staticClass:"column is-12"},[e._v("\n          Make sure to copy your new API token now. You wonâ€™t be able to see\n          it again!\n          "),n("br"),e._v(" "),n("b-notification",{attrs:{type:"is-success is-light","aria-close-label":"Close notification",closable:!1}},[e._v("\n            "+e._s(e.createdToken)+"\n          ")])],1):e._e()]),e._v(" "),n("hr")])]}}])}),e._v(" "),0==e.tokens.length?n("div",{staticClass:"has-text-centered has-text-danger"},[e._v("\n    No API token yet.\n  ")]):e._e(),e._v(" "),e._l(e.tokens,(function(t,a){return n("div",{key:a,staticClass:"has-background-light px-2 py-2 mb-1"},[e._v("\n    "+e._s(t.name)+"\n    "),n("span",{staticClass:"tag is-danger is-pulled-right",on:{click:function(n){return e.deleteToken(t.id)}}},[e._v("Delete")])])}))],2)}),[],!1,null,"336e960b",null);t.default=l.exports}}]);