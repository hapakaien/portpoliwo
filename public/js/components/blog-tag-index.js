(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"21d7":function(t,e,a){"use strict";a.r(e);var n={name:"BlogTagIndex",metaInfo:{title:"Blog: Tag"},mixins:[a("H7hI").a],data:function(){return{url:"blog/tag"}}},o=a("KHd+"),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("AddButton",{attrs:{to:{name:"blog-tag-create"}}}),t._v(" "),t.checkedRows.length?a("b-button",{attrs:{type:"is-danger",size:"is-small","icon-left":"delete",rounded:""},on:{click:t.deleteData}},[a("span",[t._v("Delete")])]):t._e(),t._v(" "),a("hr"),t._v(" "),a("b-table",{attrs:{data:t.data,loading:t.loading,"checked-rows":t.checkedRows,checkable:"","checkbox-position":t.checkboxPosition,paginated:"",hoverable:"",scrollable:"","backend-pagination":"",total:t.total,"per-page":t.perPage,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","backend-sorting":"","default-sort-direction":t.defaultSortOrder,"default-sort":[t.sortField,t.sortOrder]},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e},"page-change":t.onPageChange,sort:t.onSort}},[a("template",{slot:"empty"},[a("div",{staticClass:"has-text-centered"},[t._v("Empty")])]),t._v(" "),a("b-table-column",{attrs:{field:"created_at",label:"Created At",sortable:"",centered:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.created_at?new Date(e.row.created_at).toLocaleString():"unknown")+"\n    ")]}}])}),t._v(" "),a("b-table-column",{attrs:{field:"title",label:"Title",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.title)+"\n    ")]}}])}),t._v(" "),a("b-table-column",{attrs:{field:"slug",label:"Slug",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.slug)+"\n    ")]}}])}),t._v(" "),a("b-table-column",{attrs:{field:"posts_count",label:"Posts",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(e.row.posts_count)+"\n    ")]}}])}),t._v(" "),a("b-table-column",{attrs:{field:"action",label:"Action"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("ActionButton",{attrs:{edit:!1,"detail-to":{name:"blog-tag-id",params:{id:t.row.id}}}})]}}])}),t._v(" "),a("template",{slot:"bottom-left"},[a("b",[t._v("Total checked")]),t._v(": "+t._s(t.checkedRows.length)+"\n    ")])],2)],1)}),[],!1,null,null,null);e.default=r.exports},H7hI:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("o0o1"),o=a.n(n),r=a("ck9e");function c(t,e,a,n,o,r,c){try{var s=t[r](c),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function s(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function s(t){c(r,n,o,s,l,"next",t)}function l(t){c(r,n,o,s,l,"throw",t)}s(void 0)}))}}var l={components:{AddButton:function(){return a.e(55).then(a.bind(null,"nKYg"))},ActionButton:function(){return a.e(54).then(a.bind(null,"/6zD"))}},data:function(){return{url:"/",data:[],total:0,loading:!1,checkboxPosition:"left",checkedRows:[],sortField:"created_at",sortOrder:"desc",defaultSortOrder:"desc",page:1,perPage:10}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return s(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,r.a.post("/".concat(t.url,"/list"),{sort_field:t.sortField,sort_order:t.sortOrder,per_page:t.perPage,page:t.page}).then((function(e){var a=e.data.data;t.data=a.data;var n=a.total;a.total/t.perPage>1e3&&(n=1e3*t.perPage),t.total=n,t.loading=!1})).catch((function(e){throw t.data=[],t.total=0,t.loading=!1,e}));case 3:case"end":return e.stop()}}),e)})))()},onPageChange:function(t){this.page=t,this.checkedRows=[],this.fetchData()},onSort:function(t,e){this.sortField=t,this.sortOrder=e,this.checkedRows=[],this.fetchData()},deleteData:function(){var t,e=this;this.$buefy.dialog.confirm({title:"Deleting data",message:"Are you sure you want to <b>delete</b> selected data? This action cannot be undone.",confirmText:"Delete Data",type:"is-danger",hasIcon:!0,onConfirm:(t=s(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.checkedRows.map((function(t){return t.id})),e.checkedRows=[],t.next=4,Object(r.a)({method:"delete",url:"/".concat(e.url),data:{selectedData:a}}).then((function(t){var a=t.data;e.$buefy.toast.open({message:a.message,type:"is-danger"})})).catch((function(t){var a=t.response.data;e.$buefy.toast.open({message:a.message,type:"is-danger"})}));case 4:return t.next=6,e.fetchData();case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})})}}}}}]);